<?xml version="1.0" encoding="UTF-8"?>
<robot generator="Robot 3.2.2 (Python 3.9.1 on win32)" generated="20210420 11:24:18.741" rpa="false">
<suite id="s1" name="Connector Tests" source="D:\POT\POT-ASSEMBLIN\20-04-2021\connector-assemblin\robottests\connectors\assemblin\connector_tests.robot">
<test id="s1-t1" name="fetch, 200">
<kw name="Get Body">
<assign>
<var>${body}</var>
</assign>
<kw name="Copy Dictionary" library="Collections">
<doc>Returns a copy of the given dictionary.</doc>
<arguments>
<arg>${BROKER_BODY}</arg>
<arg>deepcopy=True</arg>
</arguments>
<assign>
<var>${body}</var>
</assign>
<msg timestamp="20210420 11:24:19.854" level="INFO">${body} = {'productCode': 'assemblin-test-1', 'parameters': {'ids': [{'idProperty': 'AI200', 'idRoom': 'A4018'}], 'dataTypes': ['MeasureAirCO2LevelPPM', 'MeasureAirTemperatureCelsiusDegree', 'MeasureAirHumidity...</msg>
<status status="PASS" starttime="20210420 11:24:19.853" endtime="20210420 11:24:19.854"></status>
</kw>
<kw name="Get Current Date" library="DateTime">
<doc>Returns current local or UTC time with an optional increment.</doc>
<arguments>
<arg>time_zone=UTC</arg>
<arg>result_format=%Y-%m-%dT%H:%M:%S+00:00</arg>
</arguments>
<assign>
<var>${now}</var>
</assign>
<msg timestamp="20210420 11:24:19.856" level="INFO">${now} = 2021-04-20T05:54:19+00:00</msg>
<status status="PASS" starttime="20210420 11:24:19.855" endtime="20210420 11:24:19.856"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>timestamp</arg>
<arg>${now}</arg>
</arguments>
<status status="PASS" starttime="20210420 11:24:19.857" endtime="20210420 11:24:19.857"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>&amp;{kwargs}</arg>
</arguments>
<status status="PASS" starttime="20210420 11:24:19.857" endtime="20210420 11:24:19.859"></status>
</kw>
<kw name="Evaluate" library="BuiltIn">
<doc>Evaluates the given expression in Python and returns the result.</doc>
<arguments>
<arg>json.dumps(${body})</arg>
<arg>json</arg>
</arguments>
<assign>
<var>${json_string}</var>
</assign>
<msg timestamp="20210420 11:24:19.862" level="INFO">${json_string} = {"productCode": "assemblin-test-1", "parameters": {"ids": [{"idProperty": "AI200", "idRoom": "A4018"}], "dataTypes": ["MeasureAirCO2LevelPPM", "MeasureAirTemperatureCelsiusDegree", "MeasureAirHumidity...</msg>
<status status="PASS" starttime="20210420 11:24:19.859" endtime="20210420 11:24:19.862"></status>
</kw>
<msg timestamp="20210420 11:24:19.863" level="INFO">${body} = {'productCode': 'assemblin-test-1', 'parameters': {'ids': [{'idProperty': 'AI200', 'idRoom': 'A4018'}], 'dataTypes': ['MeasureAirCO2LevelPPM', 'MeasureAirTemperatureCelsiusDegree', 'MeasureAirHumidity...</msg>
<status status="PASS" starttime="20210420 11:24:19.852" endtime="20210420 11:24:19.863"></status>
</kw>
<kw name="Fetch Data Product">
<arguments>
<arg>${body}</arg>
</arguments>
<kw name="Calculate Pot Signature" library="PoTLib">
<arguments>
<arg>${body}</arg>
<arg>${CLIENT_SECRET}</arg>
</arguments>
<assign>
<var>${signature}</var>
</assign>
<msg timestamp="20210420 11:24:19.872" level="INFO">${signature} = P6hGRf+u3MMauN96gR1rAslvfD+WoeNTb5XWsByFTvg=</msg>
<status status="PASS" starttime="20210420 11:24:19.868" endtime="20210420 11:24:19.873"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${signature}</arg>
</arguments>
<msg timestamp="20210420 11:24:19.873" level="INFO">P6hGRf+u3MMauN96gR1rAslvfD+WoeNTb5XWsByFTvg=</msg>
<status status="PASS" starttime="20210420 11:24:19.873" endtime="20210420 11:24:19.877"></status>
</kw>
<kw name="Set Headers" library="REST">
<tags>
<tag>settings</tag>
</tags>
<doc>*Sets new request headers or updates the existing.*</doc>
<arguments>
<arg>{"x-pot-signature": "${signature}", "x-app-token": "${APP_TOKEN}"}</arg>
</arguments>
<status status="PASS" starttime="20210420 11:24:19.878" endtime="20210420 11:24:19.879"></status>
</kw>
<kw name="Post" library="REST">
<tags>
<tag>http</tag>
</tags>
<doc>*Sends a POST request to the endpoint.*</doc>
<arguments>
<arg>${CONNECTOR_PATH}</arg>
<arg>${body}</arg>
</arguments>
<status status="PASS" starttime="20210420 11:24:19.880" endtime="20210420 11:24:31.427"></status>
</kw>
<kw name="Output Schema" library="REST">
<tags>
<tag>I/O</tag>
</tags>
<doc>*Outputs JSON Schema to terminal or a file.*</doc>
<arguments>
<arg>response body</arg>
</arguments>
<msg timestamp="20210420 11:24:31.427" level="INFO">
{
    "type": "object",
    "properties": {
        "@context": {
            "type": "string",
            "default": "https://standards-ontotest.oftrust.net/v2/Context/DataProductOutput/Sensor/"
        },
        "data": {
            "type": "object",
            "properties": {
                "sensors": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "measurements": {
                                "type": "array",
                                "items": {
                                    "type": "object",
                                    "properties": {
                                        "value": {
                                            "type": "string"
                                        },
                                        "@type": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "@type",
                                        "value"
                                    ]
                                }
                            },
                            "id": {
                                "type": "object",
                                "properties": {
                                    "idRoom": {
                                        "type": "string"
                                    },
                                    "idProperty": {
                                        "type": "string"
                                    }
                                },
                                "required": [
                                    "idProperty",
                                    "idRoom"
                                ]
                            }
                        },
                        "required": [
                            "id",
                            "measurements"
                        ]
                    },
                    "default": [
                        {
                            "measurements": [
                                {
                                    "value": "20.800001",
                                    "@type": "MeasureAirTemperatureCelsiusDegree"
                                },
                                {
                                    "value": "421.000000",
                                    "@type": "MeasureAirCO2LevelPPM"
                                },
                                {
                                    "value": "0",
                                    "@type": "MeasureOccupancy"
                                },
                                {
                                    "value": "17.299999",
                                    "@type": "MeasureAirHumidityPercent"
                                }
                            ],
                            "id": {
                                "idRoom": "A4018",
                                "idProperty": "AI200"
                            }
                        }
                    ]
                }
            },
            "required": [
                "sensors"
            ]
        },
        "signature": {
            "type": "object",
            "properties": {
                "type": {
                    "type": "string",
                    "default": "RsaSignature2018"
                },
                "created": {
                    "type": "string",
                    "default": "2021-04-20T11:24:28+05:30"
                },
                "creator": {
                    "type": "string",
                    "default": "https://localhost/assemblin/translator/v1/public.key"
                },
                "signatureValue": {
                    "type": "string",
                    "default": "CnPi+JYivzSHGrx60SK83pEyYMGtCw8c2Ft8KaONtcPP/XpsuMhVavn9aCT+iGzMoHWOkxIKP7zgF/nIf2a+FV0P3/qbMjt3kiLhSSTxxXqpw48m+EDLcxc0FG+XFma6j3V3CrMiWRGfORkKg48LrPk/oaGNh4Zxu5k58xYMRcOnhLaEcHQ8bUOs8aRQbEOajA4VdAVfZU3hPBZZZVOflOLyH2I+vEN2Hq9UX/y/dUGqB8g/XCmMNmmr+g5BEo1ZZYwFmGpU1ifL7/El/54mU4/8QmolsOoW5Poh+3WaKmTJpDSNu6XCmGBj6r/3riYY6M6vIJpA+OGieJaV+rd8/RljdjtLM3kFyIDnCnrWZIegNSg1S2UGF+HCDTt3q1yIoVO0y0s9o9pp18iJEvD66nvdB/0iiRlvqB6VIeWXSTPRv6IF74Myu/5BtyEheS1cPqcF7Ydinkp24W6Iy3L2LNyqbSG7ObMrmd8Wx6aze4DondU+0xR3nxqD09lZL+7lFpwBkQ5nPPsI7rzIizQ/VA9xU5fPUu9PRp1TqRe+bXDzeQLLV6RnaNRoGU9jLzmPpLS0+UObBoH45d7lrgpsrz3pqstRUPI7swoEwbaqmkI/h+0AqHRLFGOiaEAyZlMj6OKPpeKFMf4sOHB4jxzqkFlBhMtrkZ8OuMnF/dG7kzU="
                }
            },
            "required": [
                "created",
                "creator",
                "signatureValue",
                "type"
            ]
        }
    },
    "required": [
        "@context",
        "data",
        "signature"
    ]
}</msg>
<status status="PASS" starttime="20210420 11:24:31.427" endtime="20210420 11:24:31.463"></status>
</kw>
<status status="PASS" starttime="20210420 11:24:19.867" endtime="20210420 11:24:31.463"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response status</arg>
<arg>200</arg>
</arguments>
<status status="PASS" starttime="20210420 11:24:31.484" endtime="20210420 11:24:31.492"></status>
</kw>
<kw name="String" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON string.*</doc>
<arguments>
<arg>response body @context</arg>
<arg>https://standards-ontotest.oftrust.net/v2/Context/DataProductOutput/Sensor/</arg>
</arguments>
<status status="PASS" starttime="20210420 11:24:31.520" endtime="20210420 11:24:31.521"></status>
</kw>
<kw name="Object" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON object.*</doc>
<arguments>
<arg>response body data</arg>
</arguments>
<status status="PASS" starttime="20210420 11:24:31.531" endtime="20210420 11:24:31.537"></status>
</kw>
<kw name="Array" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON array.*</doc>
<arguments>
<arg>response body data sensors</arg>
</arguments>
<status status="PASS" starttime="20210420 11:24:31.541" endtime="20210420 11:24:31.550"></status>
</kw>
<kw name="Array" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON array.*</doc>
<arguments>
<arg>response body data sensors 0 measurements</arg>
</arguments>
<status status="PASS" starttime="20210420 11:24:31.570" endtime="20210420 11:24:31.573"></status>
</kw>
<kw name="Object" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON object.*</doc>
<arguments>
<arg>response body data sensors 0 id</arg>
</arguments>
<status status="PASS" starttime="20210420 11:24:31.593" endtime="20210420 11:24:31.602"></status>
</kw>
<tags>
<tag>bug-0001</tag>
</tags>
<status status="PASS" starttime="20210420 11:24:19.849" endtime="20210420 11:24:31.621" critical="yes"></status>
</test>
<test id="s1-t2" name="fetch, 422, Missing data for timestamp required field">
<kw name="Get Body">
<assign>
<var>${body}</var>
</assign>
<kw name="Copy Dictionary" library="Collections">
<doc>Returns a copy of the given dictionary.</doc>
<arguments>
<arg>${BROKER_BODY}</arg>
<arg>deepcopy=True</arg>
</arguments>
<assign>
<var>${body}</var>
</assign>
<msg timestamp="20210420 11:24:31.694" level="INFO">${body} = {'productCode': 'assemblin-test-1', 'parameters': {'ids': [{'idProperty': 'AI200', 'idRoom': 'A4018'}], 'dataTypes': ['MeasureAirCO2LevelPPM', 'MeasureAirTemperatureCelsiusDegree', 'MeasureAirHumidity...</msg>
<status status="PASS" starttime="20210420 11:24:31.693" endtime="20210420 11:24:31.694"></status>
</kw>
<kw name="Get Current Date" library="DateTime">
<doc>Returns current local or UTC time with an optional increment.</doc>
<arguments>
<arg>time_zone=UTC</arg>
<arg>result_format=%Y-%m-%dT%H:%M:%S+00:00</arg>
</arguments>
<assign>
<var>${now}</var>
</assign>
<msg timestamp="20210420 11:24:31.696" level="INFO">${now} = 2021-04-20T05:54:31+00:00</msg>
<status status="PASS" starttime="20210420 11:24:31.695" endtime="20210420 11:24:31.700"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>timestamp</arg>
<arg>${now}</arg>
</arguments>
<status status="PASS" starttime="20210420 11:24:31.701" endtime="20210420 11:24:31.705"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>&amp;{kwargs}</arg>
</arguments>
<status status="PASS" starttime="20210420 11:24:31.705" endtime="20210420 11:24:31.706"></status>
</kw>
<kw name="Evaluate" library="BuiltIn">
<doc>Evaluates the given expression in Python and returns the result.</doc>
<arguments>
<arg>json.dumps(${body})</arg>
<arg>json</arg>
</arguments>
<assign>
<var>${json_string}</var>
</assign>
<msg timestamp="20210420 11:24:31.712" level="INFO">${json_string} = {"productCode": "assemblin-test-1", "parameters": {"ids": [{"idProperty": "AI200", "idRoom": "A4018"}], "dataTypes": ["MeasureAirCO2LevelPPM", "MeasureAirTemperatureCelsiusDegree", "MeasureAirHumidity...</msg>
<status status="PASS" starttime="20210420 11:24:31.706" endtime="20210420 11:24:31.712"></status>
</kw>
<msg timestamp="20210420 11:24:31.717" level="INFO">${body} = {'productCode': 'assemblin-test-1', 'parameters': {'ids': [{'idProperty': 'AI200', 'idRoom': 'A4018'}], 'dataTypes': ['MeasureAirCO2LevelPPM', 'MeasureAirTemperatureCelsiusDegree', 'MeasureAirHumidity...</msg>
<status status="PASS" starttime="20210420 11:24:31.675" endtime="20210420 11:24:31.718"></status>
</kw>
<kw name="Pop From Dictionary" library="Collections">
<doc>Pops the given ``key`` from the ``dictionary`` and returns its value.</doc>
<arguments>
<arg>${body}</arg>
<arg>timestamp</arg>
</arguments>
<status status="PASS" starttime="20210420 11:24:31.723" endtime="20210420 11:24:31.725"></status>
</kw>
<kw name="Fetch Data Product">
<arguments>
<arg>${body}</arg>
</arguments>
<kw name="Calculate Pot Signature" library="PoTLib">
<arguments>
<arg>${body}</arg>
<arg>${CLIENT_SECRET}</arg>
</arguments>
<assign>
<var>${signature}</var>
</assign>
<msg timestamp="20210420 11:24:31.742" level="INFO">${signature} = AFtgvsq742+XpAlalkQunbve0+FhGroCc92zIVFpUAM=</msg>
<status status="PASS" starttime="20210420 11:24:31.741" endtime="20210420 11:24:31.742"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${signature}</arg>
</arguments>
<msg timestamp="20210420 11:24:31.743" level="INFO">AFtgvsq742+XpAlalkQunbve0+FhGroCc92zIVFpUAM=</msg>
<status status="PASS" starttime="20210420 11:24:31.742" endtime="20210420 11:24:31.743"></status>
</kw>
<kw name="Set Headers" library="REST">
<tags>
<tag>settings</tag>
</tags>
<doc>*Sets new request headers or updates the existing.*</doc>
<arguments>
<arg>{"x-pot-signature": "${signature}", "x-app-token": "${APP_TOKEN}"}</arg>
</arguments>
<status status="PASS" starttime="20210420 11:24:31.743" endtime="20210420 11:24:31.744"></status>
</kw>
<kw name="Post" library="REST">
<tags>
<tag>http</tag>
</tags>
<doc>*Sends a POST request to the endpoint.*</doc>
<arguments>
<arg>${CONNECTOR_PATH}</arg>
<arg>${body}</arg>
</arguments>
<status status="PASS" starttime="20210420 11:24:31.744" endtime="20210420 11:26:37.547"></status>
</kw>
<kw name="Output Schema" library="REST">
<tags>
<tag>I/O</tag>
</tags>
<doc>*Outputs JSON Schema to terminal or a file.*</doc>
<arguments>
<arg>response body</arg>
</arguments>
<msg timestamp="20210420 11:26:37.552" level="INFO">
{
    "type": "object",
    "properties": {
        "error": {
            "type": "object",
            "properties": {
                "status": {
                    "type": "integer",
                    "default": 500
                },
                "message": {
                    "type": "string",
                    "default": "Request failed with status code 404"
                }
            },
            "required": [
                "message",
                "status"
            ]
        }
    },
    "required": [
        "error"
    ]
}</msg>
<status status="PASS" starttime="20210420 11:26:37.548" endtime="20210420 11:26:37.574"></status>
</kw>
<status status="PASS" starttime="20210420 11:24:31.735" endtime="20210420 11:26:37.574"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response status</arg>
<arg>422</arg>
</arguments>
<msg timestamp="20210420 11:26:37.586" level="FAIL">500 is not one of [422]

Failed validating 'enum' in schema:
    {'enum': [422], 'type': 'integer'}

On instance:
    500</msg>
<status status="FAIL" starttime="20210420 11:26:37.581" endtime="20210420 11:26:37.587"></status>
</kw>
<tags>
<tag>bug-0001</tag>
</tags>
<status status="FAIL" starttime="20210420 11:24:31.658" endtime="20210420 11:26:37.588" critical="yes">500 is not one of [422]

Failed validating 'enum' in schema:
    {'enum': [422], 'type': 'integer'}

On instance:
    500</status>
</test>
<test id="s1-t3" name="fetch, 422, Missing data for parameters required field">
<kw name="Get Body">
<assign>
<var>${body}</var>
</assign>
<kw name="Copy Dictionary" library="Collections">
<doc>Returns a copy of the given dictionary.</doc>
<arguments>
<arg>${BROKER_BODY}</arg>
<arg>deepcopy=True</arg>
</arguments>
<assign>
<var>${body}</var>
</assign>
<msg timestamp="20210420 11:26:37.601" level="INFO">${body} = {'productCode': 'assemblin-test-1', 'parameters': {'ids': [{'idProperty': 'AI200', 'idRoom': 'A4018'}], 'dataTypes': ['MeasureAirCO2LevelPPM', 'MeasureAirTemperatureCelsiusDegree', 'MeasureAirHumidity...</msg>
<status status="PASS" starttime="20210420 11:26:37.600" endtime="20210420 11:26:37.601"></status>
</kw>
<kw name="Get Current Date" library="DateTime">
<doc>Returns current local or UTC time with an optional increment.</doc>
<arguments>
<arg>time_zone=UTC</arg>
<arg>result_format=%Y-%m-%dT%H:%M:%S+00:00</arg>
</arguments>
<assign>
<var>${now}</var>
</assign>
<msg timestamp="20210420 11:26:37.602" level="INFO">${now} = 2021-04-20T05:56:37+00:00</msg>
<status status="PASS" starttime="20210420 11:26:37.601" endtime="20210420 11:26:37.602"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>timestamp</arg>
<arg>${now}</arg>
</arguments>
<status status="PASS" starttime="20210420 11:26:37.602" endtime="20210420 11:26:37.603"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>&amp;{kwargs}</arg>
</arguments>
<status status="PASS" starttime="20210420 11:26:37.603" endtime="20210420 11:26:37.603"></status>
</kw>
<kw name="Evaluate" library="BuiltIn">
<doc>Evaluates the given expression in Python and returns the result.</doc>
<arguments>
<arg>json.dumps(${body})</arg>
<arg>json</arg>
</arguments>
<assign>
<var>${json_string}</var>
</assign>
<msg timestamp="20210420 11:26:37.606" level="INFO">${json_string} = {"productCode": "assemblin-test-1", "parameters": {"ids": [{"idProperty": "AI200", "idRoom": "A4018"}], "dataTypes": ["MeasureAirCO2LevelPPM", "MeasureAirTemperatureCelsiusDegree", "MeasureAirHumidity...</msg>
<status status="PASS" starttime="20210420 11:26:37.603" endtime="20210420 11:26:37.606"></status>
</kw>
<msg timestamp="20210420 11:26:37.606" level="INFO">${body} = {'productCode': 'assemblin-test-1', 'parameters': {'ids': [{'idProperty': 'AI200', 'idRoom': 'A4018'}], 'dataTypes': ['MeasureAirCO2LevelPPM', 'MeasureAirTemperatureCelsiusDegree', 'MeasureAirHumidity...</msg>
<status status="PASS" starttime="20210420 11:26:37.599" endtime="20210420 11:26:37.606"></status>
</kw>
<kw name="Pop From Dictionary" library="Collections">
<doc>Pops the given ``key`` from the ``dictionary`` and returns its value.</doc>
<arguments>
<arg>${body}</arg>
<arg>parameters</arg>
</arguments>
<status status="PASS" starttime="20210420 11:26:37.608" endtime="20210420 11:26:37.608"></status>
</kw>
<kw name="Fetch Data Product">
<arguments>
<arg>${body}</arg>
</arguments>
<kw name="Calculate Pot Signature" library="PoTLib">
<arguments>
<arg>${body}</arg>
<arg>${CLIENT_SECRET}</arg>
</arguments>
<assign>
<var>${signature}</var>
</assign>
<msg timestamp="20210420 11:26:37.616" level="INFO">${signature} = wxSh3Jm34aTsLJtNZ+yhqkGwErtb854NBfF8dV/jNys=</msg>
<status status="PASS" starttime="20210420 11:26:37.613" endtime="20210420 11:26:37.616"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${signature}</arg>
</arguments>
<msg timestamp="20210420 11:26:37.617" level="INFO">wxSh3Jm34aTsLJtNZ+yhqkGwErtb854NBfF8dV/jNys=</msg>
<status status="PASS" starttime="20210420 11:26:37.617" endtime="20210420 11:26:37.617"></status>
</kw>
<kw name="Set Headers" library="REST">
<tags>
<tag>settings</tag>
</tags>
<doc>*Sets new request headers or updates the existing.*</doc>
<arguments>
<arg>{"x-pot-signature": "${signature}", "x-app-token": "${APP_TOKEN}"}</arg>
</arguments>
<status status="PASS" starttime="20210420 11:26:37.618" endtime="20210420 11:26:37.619"></status>
</kw>
<kw name="Post" library="REST">
<tags>
<tag>http</tag>
</tags>
<doc>*Sends a POST request to the endpoint.*</doc>
<arguments>
<arg>${CONNECTOR_PATH}</arg>
<arg>${body}</arg>
</arguments>
<status status="PASS" starttime="20210420 11:26:37.619" endtime="20210420 11:26:39.675"></status>
</kw>
<kw name="Output Schema" library="REST">
<tags>
<tag>I/O</tag>
</tags>
<doc>*Outputs JSON Schema to terminal or a file.*</doc>
<arguments>
<arg>response body</arg>
</arguments>
<msg timestamp="20210420 11:26:39.680" level="INFO">
{
    "type": "object",
    "properties": {
        "error": {
            "type": "object",
            "properties": {
                "status": {
                    "type": "integer",
                    "default": 422
                },
                "message": {
                    "type": "object",
                    "properties": {
                        "parameters": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            },
                            "default": [
                                "Missing data for required field."
                            ]
                        },
                        "parameters.ids": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            },
                            "default": [
                                "Missing data for required field."
                            ]
                        },
                        "parameters.ids[0].idRoom": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            },
                            "default": [
                                "Missing data for required field."
                            ]
                        },
                        "parameters.ids[0].idProperty": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            },
                            "default": [
                                "Missing data for required field."
                            ]
                        },
                        "parameters.dataTypes": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            },
                            "default": [
                                "Missing data for required field."
                            ]
                        }
                    },
                    "required": [
                        "parameters",
                        "parameters.dataTypes",
                        "parameters.ids",
                        "parameters.ids[0].idProperty",
                        "parameters.ids[0].idRoom"
                    ]
                }
            },
            "required": [
                "message",
                "status"
            ]
        }
    },
    "required": [
        "error"
    ]
}</msg>
<status status="PASS" starttime="20210420 11:26:39.676" endtime="20210420 11:26:39.786"></status>
</kw>
<status status="PASS" starttime="20210420 11:26:37.611" endtime="20210420 11:26:39.787"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response status</arg>
<arg>502</arg>
</arguments>
<msg timestamp="20210420 11:26:39.894" level="FAIL">422 is not one of [502]

Failed validating 'enum' in schema:
    {'enum': [502], 'type': 'integer'}

On instance:
    422</msg>
<status status="FAIL" starttime="20210420 11:26:39.881" endtime="20210420 11:26:39.895"></status>
</kw>
<tags>
<tag>bug-0002</tag>
</tags>
<status status="FAIL" starttime="20210420 11:26:37.597" endtime="20210420 11:26:39.914" critical="yes">422 is not one of [502]

Failed validating 'enum' in schema:
    {'enum': [502], 'type': 'integer'}

On instance:
    422</status>
</test>
<test id="s1-t4" name="fetch, 422, Missing data for ids required field">
<kw name="Get Body">
<assign>
<var>${body}</var>
</assign>
<kw name="Copy Dictionary" library="Collections">
<doc>Returns a copy of the given dictionary.</doc>
<arguments>
<arg>${BROKER_BODY}</arg>
<arg>deepcopy=True</arg>
</arguments>
<assign>
<var>${body}</var>
</assign>
<msg timestamp="20210420 11:26:40.037" level="INFO">${body} = {'productCode': 'assemblin-test-1', 'parameters': {'ids': [{'idProperty': 'AI200', 'idRoom': 'A4018'}], 'dataTypes': ['MeasureAirCO2LevelPPM', 'MeasureAirTemperatureCelsiusDegree', 'MeasureAirHumidity...</msg>
<status status="PASS" starttime="20210420 11:26:40.037" endtime="20210420 11:26:40.037"></status>
</kw>
<kw name="Get Current Date" library="DateTime">
<doc>Returns current local or UTC time with an optional increment.</doc>
<arguments>
<arg>time_zone=UTC</arg>
<arg>result_format=%Y-%m-%dT%H:%M:%S+00:00</arg>
</arguments>
<assign>
<var>${now}</var>
</assign>
<msg timestamp="20210420 11:26:40.040" level="INFO">${now} = 2021-04-20T05:56:40+00:00</msg>
<status status="PASS" starttime="20210420 11:26:40.038" endtime="20210420 11:26:40.040"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>timestamp</arg>
<arg>${now}</arg>
</arguments>
<status status="PASS" starttime="20210420 11:26:40.041" endtime="20210420 11:26:40.042"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>&amp;{kwargs}</arg>
</arguments>
<status status="PASS" starttime="20210420 11:26:40.042" endtime="20210420 11:26:40.043"></status>
</kw>
<kw name="Evaluate" library="BuiltIn">
<doc>Evaluates the given expression in Python and returns the result.</doc>
<arguments>
<arg>json.dumps(${body})</arg>
<arg>json</arg>
</arguments>
<assign>
<var>${json_string}</var>
</assign>
<msg timestamp="20210420 11:26:40.043" level="INFO">${json_string} = {"productCode": "assemblin-test-1", "parameters": {"ids": [{"idProperty": "AI200", "idRoom": "A4018"}], "dataTypes": ["MeasureAirCO2LevelPPM", "MeasureAirTemperatureCelsiusDegree", "MeasureAirHumidity...</msg>
<status status="PASS" starttime="20210420 11:26:40.043" endtime="20210420 11:26:40.044"></status>
</kw>
<msg timestamp="20210420 11:26:40.044" level="INFO">${body} = {'productCode': 'assemblin-test-1', 'parameters': {'ids': [{'idProperty': 'AI200', 'idRoom': 'A4018'}], 'dataTypes': ['MeasureAirCO2LevelPPM', 'MeasureAirTemperatureCelsiusDegree', 'MeasureAirHumidity...</msg>
<status status="PASS" starttime="20210420 11:26:40.036" endtime="20210420 11:26:40.044"></status>
</kw>
<kw name="Pop From Dictionary" library="Collections">
<doc>Pops the given ``key`` from the ``dictionary`` and returns its value.</doc>
<arguments>
<arg>${body["parameters"]}</arg>
<arg>ids</arg>
</arguments>
<status status="PASS" starttime="20210420 11:26:40.065" endtime="20210420 11:26:40.067"></status>
</kw>
<kw name="Fetch Data Product">
<arguments>
<arg>${body}</arg>
</arguments>
<kw name="Calculate Pot Signature" library="PoTLib">
<arguments>
<arg>${body}</arg>
<arg>${CLIENT_SECRET}</arg>
</arguments>
<assign>
<var>${signature}</var>
</assign>
<msg timestamp="20210420 11:26:40.072" level="INFO">${signature} = 2Nz/mBkP1zIS7cuojDjscNuxCjBOlIMkLX+f0Jfm9Tg=</msg>
<status status="PASS" starttime="20210420 11:26:40.069" endtime="20210420 11:26:40.072"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${signature}</arg>
</arguments>
<msg timestamp="20210420 11:26:40.072" level="INFO">2Nz/mBkP1zIS7cuojDjscNuxCjBOlIMkLX+f0Jfm9Tg=</msg>
<status status="PASS" starttime="20210420 11:26:40.072" endtime="20210420 11:26:40.072"></status>
</kw>
<kw name="Set Headers" library="REST">
<tags>
<tag>settings</tag>
</tags>
<doc>*Sets new request headers or updates the existing.*</doc>
<arguments>
<arg>{"x-pot-signature": "${signature}", "x-app-token": "${APP_TOKEN}"}</arg>
</arguments>
<status status="PASS" starttime="20210420 11:26:40.073" endtime="20210420 11:26:40.074"></status>
</kw>
<kw name="Post" library="REST">
<tags>
<tag>http</tag>
</tags>
<doc>*Sends a POST request to the endpoint.*</doc>
<arguments>
<arg>${CONNECTOR_PATH}</arg>
<arg>${body}</arg>
</arguments>
<status status="PASS" starttime="20210420 11:26:40.074" endtime="20210420 11:26:42.084"></status>
</kw>
<kw name="Output Schema" library="REST">
<tags>
<tag>I/O</tag>
</tags>
<doc>*Outputs JSON Schema to terminal or a file.*</doc>
<arguments>
<arg>response body</arg>
</arguments>
<msg timestamp="20210420 11:26:42.085" level="INFO">
{
    "type": "object",
    "properties": {
        "error": {
            "type": "object",
            "properties": {
                "status": {
                    "type": "integer",
                    "default": 422
                },
                "message": {
                    "type": "object",
                    "properties": {
                        "parameters.ids": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            },
                            "default": [
                                "Missing data for required field."
                            ]
                        },
                        "parameters.ids[0].idRoom": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            },
                            "default": [
                                "Missing data for required field."
                            ]
                        },
                        "parameters.ids[0].idProperty": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            },
                            "default": [
                                "Missing data for required field."
                            ]
                        }
                    },
                    "required": [
                        "parameters.ids",
                        "parameters.ids[0].idProperty",
                        "parameters.ids[0].idRoom"
                    ]
                }
            },
            "required": [
                "message",
                "status"
            ]
        }
    },
    "required": [
        "error"
    ]
}</msg>
<status status="PASS" starttime="20210420 11:26:42.084" endtime="20210420 11:26:42.093"></status>
</kw>
<status status="PASS" starttime="20210420 11:26:40.068" endtime="20210420 11:26:42.094"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response status</arg>
<arg>502</arg>
</arguments>
<msg timestamp="20210420 11:26:42.096" level="FAIL">422 is not one of [502]

Failed validating 'enum' in schema:
    {'enum': [502], 'type': 'integer'}

On instance:
    422</msg>
<status status="FAIL" starttime="20210420 11:26:42.094" endtime="20210420 11:26:42.096"></status>
</kw>
<tags>
<tag>bug-0003</tag>
</tags>
<status status="FAIL" starttime="20210420 11:26:40.014" endtime="20210420 11:26:42.097" critical="yes">422 is not one of [502]

Failed validating 'enum' in schema:
    {'enum': [502], 'type': 'integer'}

On instance:
    422</status>
</test>
<test id="s1-t5" name="fetch, 422, Missing data for dataTypes required field">
<kw name="Get Body">
<assign>
<var>${body}</var>
</assign>
<kw name="Copy Dictionary" library="Collections">
<doc>Returns a copy of the given dictionary.</doc>
<arguments>
<arg>${BROKER_BODY}</arg>
<arg>deepcopy=True</arg>
</arguments>
<assign>
<var>${body}</var>
</assign>
<msg timestamp="20210420 11:26:42.102" level="INFO">${body} = {'productCode': 'assemblin-test-1', 'parameters': {'ids': [{'idProperty': 'AI200', 'idRoom': 'A4018'}], 'dataTypes': ['MeasureAirCO2LevelPPM', 'MeasureAirTemperatureCelsiusDegree', 'MeasureAirHumidity...</msg>
<status status="PASS" starttime="20210420 11:26:42.101" endtime="20210420 11:26:42.102"></status>
</kw>
<kw name="Get Current Date" library="DateTime">
<doc>Returns current local or UTC time with an optional increment.</doc>
<arguments>
<arg>time_zone=UTC</arg>
<arg>result_format=%Y-%m-%dT%H:%M:%S+00:00</arg>
</arguments>
<assign>
<var>${now}</var>
</assign>
<msg timestamp="20210420 11:26:42.103" level="INFO">${now} = 2021-04-20T05:56:42+00:00</msg>
<status status="PASS" starttime="20210420 11:26:42.102" endtime="20210420 11:26:42.103"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>timestamp</arg>
<arg>${now}</arg>
</arguments>
<status status="PASS" starttime="20210420 11:26:42.103" endtime="20210420 11:26:42.104"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>&amp;{kwargs}</arg>
</arguments>
<status status="PASS" starttime="20210420 11:26:42.104" endtime="20210420 11:26:42.104"></status>
</kw>
<kw name="Evaluate" library="BuiltIn">
<doc>Evaluates the given expression in Python and returns the result.</doc>
<arguments>
<arg>json.dumps(${body})</arg>
<arg>json</arg>
</arguments>
<assign>
<var>${json_string}</var>
</assign>
<msg timestamp="20210420 11:26:42.105" level="INFO">${json_string} = {"productCode": "assemblin-test-1", "parameters": {"ids": [{"idProperty": "AI200", "idRoom": "A4018"}], "dataTypes": ["MeasureAirCO2LevelPPM", "MeasureAirTemperatureCelsiusDegree", "MeasureAirHumidity...</msg>
<status status="PASS" starttime="20210420 11:26:42.104" endtime="20210420 11:26:42.105"></status>
</kw>
<msg timestamp="20210420 11:26:42.106" level="INFO">${body} = {'productCode': 'assemblin-test-1', 'parameters': {'ids': [{'idProperty': 'AI200', 'idRoom': 'A4018'}], 'dataTypes': ['MeasureAirCO2LevelPPM', 'MeasureAirTemperatureCelsiusDegree', 'MeasureAirHumidity...</msg>
<status status="PASS" starttime="20210420 11:26:42.100" endtime="20210420 11:26:42.106"></status>
</kw>
<kw name="Pop From Dictionary" library="Collections">
<doc>Pops the given ``key`` from the ``dictionary`` and returns its value.</doc>
<arguments>
<arg>${body["parameters"]}</arg>
<arg>dataTypes</arg>
</arguments>
<status status="PASS" starttime="20210420 11:26:42.106" endtime="20210420 11:26:42.107"></status>
</kw>
<kw name="Fetch Data Product">
<arguments>
<arg>${body}</arg>
</arguments>
<kw name="Calculate Pot Signature" library="PoTLib">
<arguments>
<arg>${body}</arg>
<arg>${CLIENT_SECRET}</arg>
</arguments>
<assign>
<var>${signature}</var>
</assign>
<msg timestamp="20210420 11:26:42.109" level="INFO">${signature} = 5La5a3jiZUzVobDxozHpihZ7ywipnMyn69bU/brEKgY=</msg>
<status status="PASS" starttime="20210420 11:26:42.108" endtime="20210420 11:26:42.109"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${signature}</arg>
</arguments>
<msg timestamp="20210420 11:26:42.109" level="INFO">5La5a3jiZUzVobDxozHpihZ7ywipnMyn69bU/brEKgY=</msg>
<status status="PASS" starttime="20210420 11:26:42.109" endtime="20210420 11:26:42.110"></status>
</kw>
<kw name="Set Headers" library="REST">
<tags>
<tag>settings</tag>
</tags>
<doc>*Sets new request headers or updates the existing.*</doc>
<arguments>
<arg>{"x-pot-signature": "${signature}", "x-app-token": "${APP_TOKEN}"}</arg>
</arguments>
<status status="PASS" starttime="20210420 11:26:42.110" endtime="20210420 11:26:42.111"></status>
</kw>
<kw name="Post" library="REST">
<tags>
<tag>http</tag>
</tags>
<doc>*Sends a POST request to the endpoint.*</doc>
<arguments>
<arg>${CONNECTOR_PATH}</arg>
<arg>${body}</arg>
</arguments>
<status status="PASS" starttime="20210420 11:26:42.111" endtime="20210420 11:26:44.127"></status>
</kw>
<kw name="Output Schema" library="REST">
<tags>
<tag>I/O</tag>
</tags>
<doc>*Outputs JSON Schema to terminal or a file.*</doc>
<arguments>
<arg>response body</arg>
</arguments>
<msg timestamp="20210420 11:26:44.130" level="INFO">
{
    "type": "object",
    "properties": {
        "error": {
            "type": "object",
            "properties": {
                "status": {
                    "type": "integer",
                    "default": 422
                },
                "message": {
                    "type": "object",
                    "properties": {
                        "parameters.dataTypes": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            },
                            "default": [
                                "Missing data for required field."
                            ]
                        }
                    },
                    "required": [
                        "parameters.dataTypes"
                    ]
                }
            },
            "required": [
                "message",
                "status"
            ]
        }
    },
    "required": [
        "error"
    ]
}</msg>
<status status="PASS" starttime="20210420 11:26:44.128" endtime="20210420 11:26:44.143"></status>
</kw>
<status status="PASS" starttime="20210420 11:26:42.108" endtime="20210420 11:26:44.144"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response status</arg>
<arg>502</arg>
</arguments>
<msg timestamp="20210420 11:26:44.146" level="FAIL">422 is not one of [502]

Failed validating 'enum' in schema:
    {'enum': [502], 'type': 'integer'}

On instance:
    422</msg>
<status status="FAIL" starttime="20210420 11:26:44.144" endtime="20210420 11:26:44.146"></status>
</kw>
<tags>
<tag>bug-0004</tag>
</tags>
<status status="FAIL" starttime="20210420 11:26:42.099" endtime="20210420 11:26:44.147" critical="yes">422 is not one of [502]

Failed validating 'enum' in schema:
    {'enum': [502], 'type': 'integer'}

On instance:
    422</status>
</test>
<test id="s1-t6" name="fetch, 422, Empty ids">
<kw name="Get Body">
<assign>
<var>${body}</var>
</assign>
<kw name="Copy Dictionary" library="Collections">
<doc>Returns a copy of the given dictionary.</doc>
<arguments>
<arg>${BROKER_BODY}</arg>
<arg>deepcopy=True</arg>
</arguments>
<assign>
<var>${body}</var>
</assign>
<msg timestamp="20210420 11:26:44.158" level="INFO">${body} = {'productCode': 'assemblin-test-1', 'parameters': {'ids': [{'idProperty': 'AI200', 'idRoom': 'A4018'}], 'dataTypes': ['MeasureAirCO2LevelPPM', 'MeasureAirTemperatureCelsiusDegree', 'MeasureAirHumidity...</msg>
<status status="PASS" starttime="20210420 11:26:44.157" endtime="20210420 11:26:44.158"></status>
</kw>
<kw name="Get Current Date" library="DateTime">
<doc>Returns current local or UTC time with an optional increment.</doc>
<arguments>
<arg>time_zone=UTC</arg>
<arg>result_format=%Y-%m-%dT%H:%M:%S+00:00</arg>
</arguments>
<assign>
<var>${now}</var>
</assign>
<msg timestamp="20210420 11:26:44.159" level="INFO">${now} = 2021-04-20T05:56:44+00:00</msg>
<status status="PASS" starttime="20210420 11:26:44.158" endtime="20210420 11:26:44.159"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>timestamp</arg>
<arg>${now}</arg>
</arguments>
<status status="PASS" starttime="20210420 11:26:44.159" endtime="20210420 11:26:44.159"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>&amp;{kwargs}</arg>
</arguments>
<status status="PASS" starttime="20210420 11:26:44.160" endtime="20210420 11:26:44.160"></status>
</kw>
<kw name="Evaluate" library="BuiltIn">
<doc>Evaluates the given expression in Python and returns the result.</doc>
<arguments>
<arg>json.dumps(${body})</arg>
<arg>json</arg>
</arguments>
<assign>
<var>${json_string}</var>
</assign>
<msg timestamp="20210420 11:26:44.161" level="INFO">${json_string} = {"productCode": "assemblin-test-1", "parameters": {"ids": [{"idProperty": "AI200", "idRoom": "A4018"}], "dataTypes": ["MeasureAirCO2LevelPPM", "MeasureAirTemperatureCelsiusDegree", "MeasureAirHumidity...</msg>
<status status="PASS" starttime="20210420 11:26:44.160" endtime="20210420 11:26:44.161"></status>
</kw>
<msg timestamp="20210420 11:26:44.161" level="INFO">${body} = {'productCode': 'assemblin-test-1', 'parameters': {'ids': [{'idProperty': 'AI200', 'idRoom': 'A4018'}], 'dataTypes': ['MeasureAirCO2LevelPPM', 'MeasureAirTemperatureCelsiusDegree', 'MeasureAirHumidity...</msg>
<status status="PASS" starttime="20210420 11:26:44.156" endtime="20210420 11:26:44.161"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body["parameters"]}</arg>
<arg>ids=@{EMPTY}</arg>
</arguments>
<status status="PASS" starttime="20210420 11:26:44.162" endtime="20210420 11:26:44.163"></status>
</kw>
<kw name="Fetch Data Product">
<arguments>
<arg>${body}</arg>
</arguments>
<kw name="Calculate Pot Signature" library="PoTLib">
<arguments>
<arg>${body}</arg>
<arg>${CLIENT_SECRET}</arg>
</arguments>
<assign>
<var>${signature}</var>
</assign>
<msg timestamp="20210420 11:26:44.164" level="INFO">${signature} = dgS6MsrK24oF82ArOrjsUeulehm3mh5q/yWQXSliTPM=</msg>
<status status="PASS" starttime="20210420 11:26:44.163" endtime="20210420 11:26:44.164"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${signature}</arg>
</arguments>
<msg timestamp="20210420 11:26:44.164" level="INFO">dgS6MsrK24oF82ArOrjsUeulehm3mh5q/yWQXSliTPM=</msg>
<status status="PASS" starttime="20210420 11:26:44.164" endtime="20210420 11:26:44.164"></status>
</kw>
<kw name="Set Headers" library="REST">
<tags>
<tag>settings</tag>
</tags>
<doc>*Sets new request headers or updates the existing.*</doc>
<arguments>
<arg>{"x-pot-signature": "${signature}", "x-app-token": "${APP_TOKEN}"}</arg>
</arguments>
<status status="PASS" starttime="20210420 11:26:44.165" endtime="20210420 11:26:44.165"></status>
</kw>
<kw name="Post" library="REST">
<tags>
<tag>http</tag>
</tags>
<doc>*Sends a POST request to the endpoint.*</doc>
<arguments>
<arg>${CONNECTOR_PATH}</arg>
<arg>${body}</arg>
</arguments>
<status status="PASS" starttime="20210420 11:26:44.165" endtime="20210420 11:26:46.178"></status>
</kw>
<kw name="Output Schema" library="REST">
<tags>
<tag>I/O</tag>
</tags>
<doc>*Outputs JSON Schema to terminal or a file.*</doc>
<arguments>
<arg>response body</arg>
</arguments>
<msg timestamp="20210420 11:26:46.179" level="INFO">
{
    "type": "object",
    "properties": {
        "error": {
            "type": "object",
            "properties": {
                "status": {
                    "type": "integer",
                    "default": 422
                },
                "message": {
                    "type": "object",
                    "properties": {
                        "parameters.ids[0].idRoom": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            },
                            "default": [
                                "Missing data for required field."
                            ]
                        },
                        "parameters.ids[0].idProperty": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            },
                            "default": [
                                "Missing data for required field."
                            ]
                        }
                    },
                    "required": [
                        "parameters.ids[0].idProperty",
                        "parameters.ids[0].idRoom"
                    ]
                }
            },
            "required": [
                "message",
                "status"
            ]
        }
    },
    "required": [
        "error"
    ]
}</msg>
<status status="PASS" starttime="20210420 11:26:46.178" endtime="20210420 11:26:46.198"></status>
</kw>
<status status="PASS" starttime="20210420 11:26:44.163" endtime="20210420 11:26:46.199"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response status</arg>
<arg>502</arg>
</arguments>
<msg timestamp="20210420 11:26:46.204" level="FAIL">422 is not one of [502]

Failed validating 'enum' in schema:
    {'enum': [502], 'type': 'integer'}

On instance:
    422</msg>
<status status="FAIL" starttime="20210420 11:26:46.200" endtime="20210420 11:26:46.204"></status>
</kw>
<tags>
<tag>bug-0005</tag>
</tags>
<status status="FAIL" starttime="20210420 11:26:44.155" endtime="20210420 11:26:46.205" critical="yes">422 is not one of [502]

Failed validating 'enum' in schema:
    {'enum': [502], 'type': 'integer'}

On instance:
    422</status>
</test>
<test id="s1-t7" name="fetch, 422, Empty dataTypes">
<kw name="Get Body">
<assign>
<var>${body}</var>
</assign>
<kw name="Copy Dictionary" library="Collections">
<doc>Returns a copy of the given dictionary.</doc>
<arguments>
<arg>${BROKER_BODY}</arg>
<arg>deepcopy=True</arg>
</arguments>
<assign>
<var>${body}</var>
</assign>
<msg timestamp="20210420 11:26:46.213" level="INFO">${body} = {'productCode': 'assemblin-test-1', 'parameters': {'ids': [{'idProperty': 'AI200', 'idRoom': 'A4018'}], 'dataTypes': ['MeasureAirCO2LevelPPM', 'MeasureAirTemperatureCelsiusDegree', 'MeasureAirHumidity...</msg>
<status status="PASS" starttime="20210420 11:26:46.212" endtime="20210420 11:26:46.213"></status>
</kw>
<kw name="Get Current Date" library="DateTime">
<doc>Returns current local or UTC time with an optional increment.</doc>
<arguments>
<arg>time_zone=UTC</arg>
<arg>result_format=%Y-%m-%dT%H:%M:%S+00:00</arg>
</arguments>
<assign>
<var>${now}</var>
</assign>
<msg timestamp="20210420 11:26:46.214" level="INFO">${now} = 2021-04-20T05:56:46+00:00</msg>
<status status="PASS" starttime="20210420 11:26:46.214" endtime="20210420 11:26:46.214"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>timestamp</arg>
<arg>${now}</arg>
</arguments>
<status status="PASS" starttime="20210420 11:26:46.215" endtime="20210420 11:26:46.215"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>&amp;{kwargs}</arg>
</arguments>
<status status="PASS" starttime="20210420 11:26:46.216" endtime="20210420 11:26:46.216"></status>
</kw>
<kw name="Evaluate" library="BuiltIn">
<doc>Evaluates the given expression in Python and returns the result.</doc>
<arguments>
<arg>json.dumps(${body})</arg>
<arg>json</arg>
</arguments>
<assign>
<var>${json_string}</var>
</assign>
<msg timestamp="20210420 11:26:46.218" level="INFO">${json_string} = {"productCode": "assemblin-test-1", "parameters": {"ids": [{"idProperty": "AI200", "idRoom": "A4018"}], "dataTypes": ["MeasureAirCO2LevelPPM", "MeasureAirTemperatureCelsiusDegree", "MeasureAirHumidity...</msg>
<status status="PASS" starttime="20210420 11:26:46.216" endtime="20210420 11:26:46.218"></status>
</kw>
<msg timestamp="20210420 11:26:46.218" level="INFO">${body} = {'productCode': 'assemblin-test-1', 'parameters': {'ids': [{'idProperty': 'AI200', 'idRoom': 'A4018'}], 'dataTypes': ['MeasureAirCO2LevelPPM', 'MeasureAirTemperatureCelsiusDegree', 'MeasureAirHumidity...</msg>
<status status="PASS" starttime="20210420 11:26:46.211" endtime="20210420 11:26:46.218"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body["parameters"]}</arg>
<arg>dataTypes=@{EMPTY}</arg>
</arguments>
<status status="PASS" starttime="20210420 11:26:46.219" endtime="20210420 11:26:46.220"></status>
</kw>
<kw name="Fetch Data Product">
<arguments>
<arg>${body}</arg>
</arguments>
<kw name="Calculate Pot Signature" library="PoTLib">
<arguments>
<arg>${body}</arg>
<arg>${CLIENT_SECRET}</arg>
</arguments>
<assign>
<var>${signature}</var>
</assign>
<msg timestamp="20210420 11:26:46.221" level="INFO">${signature} = NAWt/22K6ieq1w1YbOr/kp9gIa+0BlWyT1SYqgqCk0Y=</msg>
<status status="PASS" starttime="20210420 11:26:46.221" endtime="20210420 11:26:46.221"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${signature}</arg>
</arguments>
<msg timestamp="20210420 11:26:46.222" level="INFO">NAWt/22K6ieq1w1YbOr/kp9gIa+0BlWyT1SYqgqCk0Y=</msg>
<status status="PASS" starttime="20210420 11:26:46.221" endtime="20210420 11:26:46.222"></status>
</kw>
<kw name="Set Headers" library="REST">
<tags>
<tag>settings</tag>
</tags>
<doc>*Sets new request headers or updates the existing.*</doc>
<arguments>
<arg>{"x-pot-signature": "${signature}", "x-app-token": "${APP_TOKEN}"}</arg>
</arguments>
<status status="PASS" starttime="20210420 11:26:46.222" endtime="20210420 11:26:46.222"></status>
</kw>
<kw name="Post" library="REST">
<tags>
<tag>http</tag>
</tags>
<doc>*Sends a POST request to the endpoint.*</doc>
<arguments>
<arg>${CONNECTOR_PATH}</arg>
<arg>${body}</arg>
</arguments>
<status status="PASS" starttime="20210420 11:26:46.223" endtime="20210420 11:26:54.734"></status>
</kw>
<kw name="Output Schema" library="REST">
<tags>
<tag>I/O</tag>
</tags>
<doc>*Outputs JSON Schema to terminal or a file.*</doc>
<arguments>
<arg>response body</arg>
</arguments>
<msg timestamp="20210420 11:26:54.735" level="INFO">
{
    "type": "object",
    "properties": {
        "@context": {
            "type": "string",
            "default": "https://standards-ontotest.oftrust.net/v2/Context/DataProductOutput/Sensor/"
        },
        "data": {
            "type": "object",
            "properties": {
                "sensors": {
                    "type": "array",
                    "default": []
                }
            },
            "required": [
                "sensors"
            ]
        },
        "signature": {
            "type": "object",
            "properties": {
                "type": {
                    "type": "string",
                    "default": "RsaSignature2018"
                },
                "created": {
                    "type": "string",
                    "default": "2021-04-20T11:26:54+05:30"
                },
                "creator": {
                    "type": "string",
                    "default": "https://localhost/assemblin/translator/v1/public.key"
                },
                "signatureValue": {
                    "type": "string",
                    "default": "OQphIa2ZcH5E3nCa162ETyRLjKo2kG8vCtR/+bactitTaEF/Q+Yrv9TQgl4MI5WLzqQ2Tqbw/TXJgU3bThpQCqGOUyBZm0GotqwffuTGUXZm29dlrBIcBsYsvHn8+bQ5VoRVwU1p+QNCwXV6YYhx1X2VJO/VwSA09+1wf6/FKrX6L7RcH26tDRgXwQmJcuDrHS1v40MIgSPYnNvQn4jTjD2HHtyMY/6GUcUx92Dw2WooPOBKfOebx63TaIXMGC2lhAROQQZpKFM+bSludVXOZ7DyLFNsI5DWZqKZt0mcb4mV53aYowSstjkiqGFACYeROAjii4e4Mdy+3zpbhYOqjwerzI2OvouJV0uxkExQpG83p/t6bCJwLGZ4kpdnn9LdyPCkCjkc1rUyb271FE3fa4uJsn7TOHFSNI2yi5SgBrPJpPrn7CShSr6tsPAqh/s0CGKaQ5AOO9rETCbKMIs3CsNqr9PUGzvP9I78X+tBX5gnYRWbE4owkxDl0x4UwRLkxGUIQGEJ8O6CWt2PtccUiJmLe66euxnQuo5lcZ8qikLHfBe5FC3oJmC1Pk78GJGq2FLC5Ggt0Ovs+G0j7Wo61cPE0hFOxsiEGv9utcNCGTcZ9em8t5AvflImsMEddyKf2aypgSpHbpMNK2skwN4zbrk6swRWOd3QEFEZetTBvv0="
                }
            },
            "required": [
                "created",
                "creator",
                "signatureValue",
                "type"
            ]
        }
    },
    "required": [
        "@context",
        "data",
        "signature"
    ]
}</msg>
<status status="PASS" starttime="20210420 11:26:54.735" endtime="20210420 11:26:54.746"></status>
</kw>
<status status="PASS" starttime="20210420 11:26:46.220" endtime="20210420 11:26:54.746"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response status</arg>
<arg>502</arg>
</arguments>
<msg timestamp="20210420 11:26:54.749" level="FAIL">200 is not one of [502]

Failed validating 'enum' in schema:
    {'enum': [502], 'type': 'integer'}

On instance:
    200</msg>
<status status="FAIL" starttime="20210420 11:26:54.747" endtime="20210420 11:26:54.749"></status>
</kw>
<tags>
<tag>bug-0006</tag>
</tags>
<status status="FAIL" starttime="20210420 11:26:46.210" endtime="20210420 11:26:54.750" critical="yes">200 is not one of [502]

Failed validating 'enum' in schema:
    {'enum': [502], 'type': 'integer'}

On instance:
    200</status>
</test>
<doc>Assemblin Temperature / CO2 sensors</doc>
<status status="FAIL" starttime="20210420 11:24:18.744" endtime="20210420 11:26:54.755"></status>
</suite>
<statistics>
<total>
<stat pass="1" fail="6">Critical Tests</stat>
<stat pass="1" fail="6">All Tests</stat>
</total>
<tag>
<stat pass="1" fail="1">bug-0001</stat>
<stat pass="0" fail="1">bug-0002</stat>
<stat pass="0" fail="1">bug-0003</stat>
<stat pass="0" fail="1">bug-0004</stat>
<stat pass="0" fail="1">bug-0005</stat>
<stat pass="0" fail="1">bug-0006</stat>
</tag>
<suite>
<stat pass="1" fail="6" id="s1" name="Connector Tests">Connector Tests</stat>
</suite>
</statistics>
<errors>
</errors>
</robot>
